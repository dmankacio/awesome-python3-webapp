{% extends '_base.html' %}

{% block title %}查看日志{% endblock %}

{% block beforehead %}

<script>
    var ID = '{{id}}', blog = null
    function initVM(blog) {
        var vm = new Vue({
            el: '#vm',
            blog: blog
        });
        $('#vm').show();
    }
    $(function() {
        if(ID) {
            getJSON('/api/blog/' + ID, function(err, blog) {
                if(err) { return fatal(err) }
                $('#loading').hide()
                initVM(blog)
            })
        } else {
            alert('请指定ID')
        }
    });
</script>
{% endblock %}


{% block content %}

    <div class="uk-width-1-1 uk-margin-bottom">
        <div class="uk-panel uk-panel-box">
            <ul class="uk-breadcrumb">
                <li><a href="/manage/comments">评论</a></li>
                <li><a href="/manage/blogs">日志</a></li>
                <li><a href="/manage/users">用户</a></li>
            </ul>
        </div>
    </div>

    <div id="error" class="uk-width-1-1">
    </div>

    <div id="loading" class="uk-width-1-1 uk-text-center">
        <span><i class="uk-icon-spinner uk-icon-medium uk-icon-spin"></i> 正在加载...</span>
    </div>

    <div id="vm" class="uk-width-2-3">
        <article class="uk-article">
            <h2><a href="/blog/{{ blog.id }}">{{ blog.name }}</a></h2>
            <p class="uk-article-meta">发表于{{ blog.created_at|datetime}}</p>
            <p>{{ blog.summary }}</p>
            <p>{{ blog.content }}</p>
        </article>
    </div>


{% endblock %}